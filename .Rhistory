dir = "WIND.DIR",
opts = "facet_wrap(~USAF, drop = TRUE)")
plot.windrose <- plot.windrose + theme(axis.text.x = element_blank())
print(plot.windrose)
ggsave(file.path(data.dir,"figures","WindRoses.png"),
plot = plot.windrose,
scale = 1, width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
## Create a base map that we will use to overlay plots on ----
base.map <- CreateBaseMap(lat.range = lat.range,
long.range = long.range)
ggsave(file.path(data.dir,"maps","MapBase.png"),
plot = base.map,
scale = 1, width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
## Map the stations ----
station.map <- MapStations(base.map = base.map,
stations = stations.highrate,
labels = TRUE)
ggsave(file.path(data.dir,"maps","MapStationsByUSAF.png"),
plot = station.map,
scale = 1,
width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
library("ggmap", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
library("xtable", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
## create a LaTeX table for reference ----
WriteStationInformation(stations.highrate,
data.dir,
country.code)
## show wind roses ----
plot.windrose <- plotWindrose(data = obs.highrate,
spd = "WIND.SPD",
dir = "WIND.DIR",
opts = "facet_wrap(~USAF, drop = TRUE)")
plot.windrose <- plot.windrose + theme(axis.text.x = element_blank())
print(plot.windrose)
ggsave(file.path(data.dir,"figures","WindRoses.png"),
plot = plot.windrose,
scale = 1, width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
## Create a base map that we will use to overlay plots on ----
base.map <- CreateBaseMap(lat.range = lat.range,
long.range = long.range)
ggsave(file.path(data.dir,"maps","MapBase.png"),
plot = base.map,
scale = 1, width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
## Map the stations ----
station.map <- MapStations(base.map = base.map,
stations = stations.highrate,
labels = TRUE)
ggsave(file.path(data.dir,"maps","MapStationsByUSAF.png"),
plot = station.map,
scale = 1,
width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
dev.off
dev.off()
dev.off()
## create a LaTeX table for reference ----
WriteStationInformation(stations.highrate,
data.dir,
country.code)
## show wind roses ----
plot.windrose <- plotWindrose(data = obs.highrate,
spd = "WIND.SPD",
dir = "WIND.DIR",
opts = "facet_wrap(~USAF, drop = TRUE)")
plot.windrose <- plot.windrose + theme(axis.text.x = element_blank())
print(plot.windrose)
ggsave(file.path(data.dir,"figures","WindRoses.png"),
plot = plot.windrose,
scale = 1, width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
## Create a base map that we will use to overlay plots on ----
base.map <- CreateBaseMap(lat.range = lat.range,
long.range = long.range)
ggsave(file.path(data.dir,"maps","MapBase.png"),
plot = base.map,
scale = 1, width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
## Map the stations ----
station.map <- MapStations(base.map = base.map,
stations = stations.highrate,
labels = TRUE)
ggsave(file.path(data.dir,"maps","MapStationsByUSAF.png"),
plot = station.map,
scale = 1,
width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
print(plot.windrose)
dev.new()
dev.new()
print(plot.windrose)
ggsave(file.path(data.dir,"figures","WindRoses.png"),
plot = plot.windrose,
scale = 1, width = 9,
height = 6, units = c("in"),
dpi = 300, limitsize = TRUE)
source('~/.active-rstudio-document')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/SurfaceStationSummary.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/FindStations.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/SurfaceStationSummary.R')
stations.all
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/SurfaceStationSummary.R', echo=TRUE)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/FindStations.R')
stations.all <- FindStations(country.code = country.code,
year.range = year.range,
lat.range = lat.range,
long.range = long.range,
data.dir = data.dir)
stations.all
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/FindStations.R')
stations.all <- FindStations(country.code = country.code,
year.range = year.range,
lat.range = lat.range,
long.range = long.range,
data.dir = data.dir)
stations.all
is.na(stations.all$USAF)
?&
?and
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/FindStations.R')
stations.all <- FindStations(country.code = country.code,
year.range = year.range,
lat.range = lat.range,
long.range = long.range,
data.dir = data.dir)
stations.all
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/SurfaceStationSummary.R')
stations.all
station.files
year.range
stations.all
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files
stations.all
test = 2
switch(test, 1 = "hello",2 = "world")
?switch
switch(test, 1 = hello,2 = cat("world"))
switch(test, 1 = hello,2 = cat("world"))
test = "2"
switch(test, 1 = hello,2 = cat("world"))
switch(test, 1 = print(hello),2 = cat("world"))
?ifelse
if(errorCode==1){desc <- "Generic error code."}
?download.file
?try
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?file.infor
?file.info
?file.remove
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files
require(Rcurl)
require(RCurl)
?require
install.packages(RCurl)
install.packages("RCurl")
require("RCurl")
require("reshape")
require("ggplot2")
require("ggmap")
require("xtable")
require("xtable")
?getURL
?url.exists
?RCurl
?grep
?substr
?file.path
?strwidth
NOAA.FTP <- "ftp://ftp3.ncdc.noaa.gov/pub/data/noaa"
y =2009
dest.listing <- getURL(file.path(NOAA.FTP,y),
verbose=TRUE,
dirlistonly = TRUE)
dest.listing
dest.listing <- getURL(file.path(NOAA.FTP,y,sep="/"),
verbose=FLASE,
dirlistonly = TRUE)
dest.listing <- getURL(file.path(NOAA.FTP,y,sep="/"),
verbose=FALSE,
dirlistonly = TRUE)
dest.listing
dest.listing <- as.list(getURL(file.path(NOAA.FTP,y,sep="/"),
verbose=FALSE,
dirlistonly = TRUE))
dest.listing
?as.vector
dest.listing <- strsplit(getURL(file.path(NOAA.FTP,y,sep="/"),
verbose=FALSE,
dirlistonly = TRUE),
"\n")
dest.listing
USAF = 786550
dest.listing(grepl(USAF,dest.listing))
dest.listing[grepl(USAF,dest.listing)]
grepl(USAF,dest.listing)
?grep
grepl(USAF,dest.listing,value = TRUE)
grepl(paste("^", USAF, sep="", collapse="|"),dest.listing,value = TRUE)
grepl(paste("^", USAF, sep="", collapse="|"),dest.listing)
grepl(paste("^", USAF, sep=""),dest.listing)
grep(paste("^", USAF, sep=""),dest.listing)
pmatch(USAF,dest.listing)
USAF%in% dest.listing
USAF %in% dest.listing
USAF = c("786550")
USAF %in% dest.listing
grep(paste("^", USAF, sep=""),dest.listing)
grep(paste("[", USAF,"]" sep=""),dest.listing)
grep(paste("[", USAF,"]", sep=""),dest.listing)
grepl(paste("[", USAF,"]", sep=""),dest.listing)
grepl(paste("[", USAF,"]", sep=""),dest.listing,value = TRUE)
grep(paste("[", USAF,"]", sep=""),dest.listing,value = TRUE)
grep(paste("^", USAF,"", sep=""),dest.listing,fixed = TRUE)
grep(paste("", USAF,"", sep=""),dest.listing,fixed = TRUE)
grep(paste("", USAF,"", sep=""),dest.listing,fixed = TRUE,value = TRUE)
USAF %in% dest.listing
USAF
dest.listing
pmatch(USAF, dest.listing, nomatch = 0) > 0
pmatch( dest.listing, USAF, nomatch = 0) > 0
pmatch( dest.listing, USAF, nomatch = 0)
pmatch(dest.listing, USAF, nomatch = 0)
dest.listing <- unlist(strsplit(getURL(file.path(NOAA.FTP,y,sep="/"),
verbose=FALSE,
dirlistonly = TRUE),
"\n"))
dest.listing
pmatch(USAF, dest.listing, nomatch = 0) > 0
dest.listing[pmatch(USAF, dest.listing, nomatch = 0) > 0]
?pmatch
USAF %in% dest.listing
?agrep
agrep(USAF,dest.listing,fixed = TRUE)
grep("786500",dest.listing,fixed = TRUE,value = TRUE)
grep(USAF,dest.listing,fixed = TRUE,value = TRUE)
grep("abcd",dest.listing,fixed = TRUE,value = TRUE)
is.null(grep("abcd",dest.listing,fixed = TRUE,value = TRUE))
length(grep("abcd",dest.listing,fixed = TRUE,value = TRUE))
length(grep("abcd",dest.listing,fixed = TRUE,value = TRUE)) == 0
fn <- "test.gz"
sub(fn,".gz","")
?sub
sub(".gz","",fn)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?getURL
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?getURL
?curlPerform
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/.active-rstudio-document')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?getCurlHandle
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.list
stations.all
stations.all$USAF[1]
as.character(stations.all$USAF[1])
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?file.path
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?curlPerform
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
?CFILE
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
dest.listing <- getURL(file.path(NOAA.FTP,y),curl = curl)
dest.listing <- getURL(file.path(NOAA.FTP,y,"")
)
dest.listing
dest.listing <- getURL(file.path(NOAA.FTP,y,""),dirlistonly = TRUE)
dest.listing
unlist(strsplit(dest.listing,"\n"))
stations.all
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/.active-rstudio-document')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?CFILE
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?curlPerform
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?try
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
?curlPerform
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
source('~/Documents/projects/active/Rcode/SurfaceStationSummary/functions/RequestStationDataFiles.R')
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
station.files <- RequestStationDataFiles(station.list = stations.all,
year.range = year.range,
data.dir = data.dir,
debug = 0)
?complete
